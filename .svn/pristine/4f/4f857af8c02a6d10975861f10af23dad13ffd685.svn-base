{"version":3,"sources":["../../../src/server/helper/authorization-helper.js"],"names":["Constants","ServerCall","authorize","iss","launch","authorizeURL","bind","catch","console","log","issURl","decodeURIComponent","callUrl","result","data","rest","security","extension","filter","ext","url","valueUri","redirectUrl","RESPONSE_TYPE","CLIENT_ID","REDIRECT_URL","SCOPE"],"mappings":"AAAA;;;;;;;AACA;;;;AACA;;IAAYA,S;;AACZ;;IAAYC,U;;;;;;AAEL,IAAMC,gCAAY,SAAZA,SAAY,CAACC,GAAD,EAAMC,MAAN;AAAA,WACrB,kBAAGC,aAAaC,IAAb,YAAwBH,GAAxB,EAA6BC,MAA7B,CAAH,EACKG,KADL,CACWC,QAAQC,GADnB,CADqB;AAAA,CAAlB;;AAIP,IAAMJ,uCAAe,sBAAWF,GAAX,EAAgBC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AACXM,0BADW,GACCC,mBAAmBR,GAAnB,CADD;AAAA;AAAA,2BAEIF,WAAWW,OAAX,CAAmBF,MAAnB,CAFJ;;AAAA;AAEXG,0BAFW;AAGXR,gCAHW,GAGIQ,OAAOC,IAAP,CAAYC,IAAZ,CAAiB,CAAjB,EAAoBC,QAApB,CAA6BC,SAA7B,CAAuC,CAAvC,EAA0CA,SAA1C,CAAoDC,MAApD,CAA2D;AAAA,+BAAOC,IAAIC,GAAJ,KAAY,WAAnB;AAAA,qBAA3D,EAA2F,CAA3F,EAA8FC,QAHlG;AAIXC,+BAJW,GAIGjB,eAChB,iBADgB,GACIL,UAAUuB,aADd,GAEhB,aAFgB,GAEAvB,UAAUwB,SAFV,GAGhB,gBAHgB,GAGGxB,UAAUyB,YAHb,GAIhB,UAJgB,GAIHrB,MAJG,GAKhB,SALgB,GAKJJ,UAAU0B,KALN,GAMhB,8BANgB,GAMiBvB,GAVpB;AAAA,qDAWVmB,WAXU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAf,CAAN","file":"authorization-helper.js","sourcesContent":["\"use strict\";\nimport co from 'co';\nimport * as Constants from '../util/constants';\nimport * as ServerCall from '../service/fhir-resource-service'\n\nexport const authorize = (iss, launch) =>\n    co(authorizeURL.bind(this, iss, launch))\n        .catch(console.log);\n\nconst authorizeURL = function* (iss, launch) {\n    const issURl = `${decodeURIComponent(iss)}/metadata`;\n    const result = yield ServerCall.callUrl(issURl);\n    const authorizeURL = result.data.rest[0].security.extension[0].extension.filter(ext => ext.url === 'authorize')[0].valueUri;\n    const redirectUrl = authorizeURL +\n        '?response_type=' + Constants.RESPONSE_TYPE +\n        '&client_id=' + Constants.CLIENT_ID +\n        '&redirect_uri=' + Constants.REDIRECT_URL +\n        '&launch=' + launch +\n        '&scope=' + Constants.SCOPE +\n        '&state=98wrghuwuogerg97&aud=' + iss;\n    return redirectUrl;\n};"]}