{"version":3,"sources":["../../../src/server/controllers/view-renderer-controller.js"],"names":["AuthorizationHelper","router","Router","get","req","res","next","iss","launch","query","authorize","url","redirect","console","log","code","state","accessToken","html","renderToString","createElement","send"],"mappings":"AAAA;;;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;IAAYA,mB;;AACZ;;;;;;;;AAGA,IAAMC,SAAS,kBAAQC,MAAR,EAAf;;AAEAD,OAAOE,GAAP,CAAW,GAAX,EAAgB,4CAAG,iBAAWC,GAAX,EAAgBC,GAAhB,EAAqBC,IAArB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACXC,uBADW,GACL,IADK,EACCC,MADD,GACU,IADV;AAAA,iCAEIJ,IAAIK,KAFR;AAEZF,uBAFY,cAEZA,GAFY;AAEPC,0BAFO,cAEPA,MAFO;AAAA;AAAA,2BAGGR,oBAAoBU,SAApB,CAA8BH,GAA9B,EAAmCC,MAAnC,CAHH;;AAAA;AAGTG,uBAHS;;AAIfN,wBAAIO,QAAJ,CAAaD,GAAb;;AAJe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAH,EAAhB;;AAOAV,OAAOE,GAAP,CAAW,WAAX,EAAwB,4CAAG,kBAAWC,GAAX,EAAgBC,GAAhB,EAAqBC,IAArB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACvBO,4BAAQC,GAAR,CAAY,cAAZ;AACAD,4BAAQC,GAAR,CAAYV,IAAIK,KAAhB;AACAI,4BAAQC,GAAR,CAAYV,IAAIK,KAAJ,CAAUM,IAAtB;AACIA,wBAJmB,GAIZ,IAJY;AAAA,kCAKJX,IAAIK,KALA;AAKpBM,wBALoB,eAKpBA,IALoB;AAKdC,yBALc,eAKdA,KALc;AAAA;AAAA,2BAMjBhB,oBAAoBiB,WAApB,CAAgCF,IAAhC,CANiB;;AAAA;AAOjBG,wBAPiB,GAOV,iBAAeC,cAAf,CACT,gBAAMC,aAAN,iBADS,CAPU;;AAUvBf,wBAAIgB,IAAJ,CAASH,IAAT;;AAVuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAH,EAAxB;;kBAaejB,M","file":"view-renderer-controller.js","sourcesContent":["\"use strict\";\nimport express from 'express';\nimport React from 'react';\nimport ReactDomServer from 'react-dom/server';\nimport Component from '../index';\nimport * as AuthorizationHelper from '../helper/authorization-helper';\nimport co from '../util/wrap';\n\n\nconst router = express.Router();\n\nrouter.get('/', co(function* (req, res, next) {\n    let iss = null, launch = null;\n    ({ iss, launch } = req.query);\n    const url = yield AuthorizationHelper.authorize(iss, launch);\n    res.redirect(url);\n}));\n\nrouter.get('/callback', co(function* (req, res, next) {\n    console.log('in call back');\n    console.log(req.query);\n    console.log(req.query.code);\n    let code = null;\n    ({ code, state } = req.query);\n    yield AuthorizationHelper.accessToken(code);\n    const html = ReactDomServer.renderToString(\n        React.createElement(Component)\n    );\n    res.send(html);\n}));\n\nexport default router;"]}