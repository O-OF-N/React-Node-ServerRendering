{"version":3,"sources":["../../../src/server/helper/authorization-helper.js"],"names":[],"mappings":"AAAA;;;;;;;AACA;;;;AACA;;IAAY,S;;AACZ;;IAAY,U;;;;;;AAEL,IAAM,gCAAY,SAAZ,SAAY,CAAC,GAAD,EAAM,MAAN;AAAA,WACrB,kBAAG,aAAa,IAAb,YAAwB,GAAxB,EAA6B,MAA7B,CAAH,EACK,KADL,CACW,QAAQ,GADnB,CADqB;AAAA,CAAlB;;AAIP,IAAM,uCAAe,sBAAW,GAAX,EAAgB,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AACX,0BADW,GACC,mBAAmB,GAAnB,CADD;AAAA;AAAA,2BAEI,WAAW,OAAX,CAAmB,MAAnB,CAFJ;;AAAA;AAEX,0BAFW;AAGX,gCAHW,GAGI,OAAO,IAAP,CAAY,IAAZ,CAAiB,CAAjB,EAAoB,QAApB,CAA6B,SAA7B,CAAuC,CAAvC,EAA0C,SAA1C,CAAoD,MAApD,CAA2D;AAAA,+BAAO,IAAI,GAAJ,KAAY,WAAnB;AAAA,qBAA3D,EAA2F,CAA3F,EAA8F,QAHlG;AAIX,+BAJW,GAIG,eAChB,iBADgB,GACI,UAAU,aADd,GAEhB,aAFgB,GAEA,UAAU,SAFV,GAGhB,gBAHgB,GAGG,UAAU,YAHb,GAIhB,UAJgB,GAIH,MAJG,GAKhB,SALgB,GAKJ,UAAU,KALN,GAMhB,8BANgB,GAMiB,GAVpB;;AAWb,4BAAQ,GAAR,CAAY,WAAZ;AACA,4BAAQ,GAAR,CAAY,WAAZ;AAZa,qDAaV,WAbU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAf,CAAN","file":"authorization-helper.js","sourcesContent":["\"use strict\";\nimport co from 'co';\nimport * as Constants from '../util/constants';\nimport * as ServerCall from '../service/fhir-resource-service'\n\nexport const authorize = (iss, launch) =>\n    co(authorizeURL.bind(this, iss, launch))\n        .catch(console.log);\n\nconst authorizeURL = function* (iss, launch) {\n    const issURl = `${decodeURIComponent(iss)}/metadata`;\n    const result = yield ServerCall.callUrl(issURl);\n    const authorizeURL = result.data.rest[0].security.extension[0].extension.filter(ext => ext.url === 'authorize')[0].valueUri;\n    const redirectUrl = authorizeURL +\n        '?response_type=' + Constants.RESPONSE_TYPE +\n        '&client_id=' + Constants.CLIENT_ID +\n        '&redirect_uri=' + Constants.REDIRECT_URL +\n        '&launch=' + launch +\n        '&scope=' + Constants.SCOPE +\n        '&state=98wrghuwuogerg97&aud=' + iss;\n        console.log('>>>>>>>>>')\n        console.log(redirectUrl);\n    return redirectUrl;\n};"]}